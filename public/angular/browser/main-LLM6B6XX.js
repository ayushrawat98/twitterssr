import{a as v}from"./chunk-G5KA7DMQ.js";import{B as p,Ba as T,Ca as L,D as d,Da as j,E as k,Fa as D,Ha as N,I,Ia as F,Ja as U,K as c,Ka as H,La as B,M as x,Na as l,P as s,Q as r,R as P,S as w,T as b,U as _,Z as n,_ as O,la as E,n as m,p as y,q as M,ra as f,wa as h,x as u,xa as g,y as A,za as R}from"./chunk-6P4DJA2C.js";var K=[{path:"login",loadComponent:()=>import("./chunk-HTUOXGMG.js").then(e=>e.LoginComponent),canActivate:[()=>!m(l).userdata()]},{path:"register",loadComponent:()=>import("./chunk-ARCPNDBR.js").then(e=>e.RegisterComponent),canActivate:[()=>!m(l).userdata()]},{path:"notification",loadComponent:()=>import("./chunk-O6CHSINW.js").then(e=>e.NotificationComponent)},{path:"main/:page",loadComponent:()=>import("./chunk-F5XHXLEZ.js").then(e=>e.MainComponent)},{path:":username",loadComponent:()=>import("./chunk-SDEETUKF.js").then(e=>e.ProfileComponent)},{path:":username/post/:id",loadComponent:()=>import("./chunk-X33UZAOX.js").then(e=>e.PostexpandedComponent)},{path:"",redirectTo:"main/0",pathMatch:"full"}];var Y=(e,t)=>{let o=m(u);if(g(o)){let i=m(f),a=e.clone({headers:e.headers.set("Cookie",i?.headers.get("cookie")??"")});return t(a)}if(h(o)){let i=localStorage.getItem("token"),a=e.clone({headers:e.headers.set("Authorization","Bearer "+(i??""))});return t(a)}return t(e)};var V={providers:[E({eventCoalescing:!0}),H(K,B({scrollPositionRestoration:"enabled"})),T(j(),L([Y])),D()]};function q(e,t){e&1&&(s(0,"a",2),n(1,"login"),r(),n(2," \xA0 "),s(3,"a",2),n(4,"register"),r(),n(5," \xA0 ")),e&2&&(c("routerLink","/login"),p(3),c("routerLink","/register"))}function Q(e,t){if(e&1){let o=w();s(0,"a",2),n(1),r(),n(2," \xA0 "),s(3,"a",2),n(4,"notification"),r(),n(5," \xA0 "),s(6,"a",3),b("click",function(){y(o);let a=_();return M(a.logout())}),n(7,"logout"),r()}if(e&2){let o,i,a=_();c("routerLink","/"+((o=a._authservice.userdata())==null?null:o.username)),p(),O("@"+((i=a._authservice.userdata())==null?null:i.username)),p(2),c("routerLink","/notification")}}var S="USER_DATA",C=class e{constructor(t,o,i,a){this._authservice=t;this.route=o;this.platformId=i;this.transferState=a;this.request=m(f)}title="Khichdi";request;ngOnInit(){if(g(this.platformId)){let t=this.request?.headers.get("cookie");t&&Date.now()<v(t).exp*1e3?(this._authservice.userdata.set(v(t)),this.transferState.set(S,v(t))):this._authservice.userdata.set(null)}if(h(this.platformId)){let t=this.transferState.get(S,null);t&&(this._authservice.userdata.set(t),this.transferState.remove(S))}}logout(){this.route.navigateByUrl("/main/0")}static \u0275fac=function(o){return new(o||e)(d(l),d(F),d(u),d(A))};static \u0275cmp=k({type:e,selectors:[["app-root"]],decls:14,vars:5,consts:[[1,"container"],["id","sliding-text"],[3,"routerLink"],[3,"click"]],template:function(o,i){o&1&&(s(0,"div",0)(1,"header")(2,"div",1)(3,"h1",2),n(4,"\u0916\u093F\u091A\u095C\u0940"),r(),s(5,"h1",2),n(6,"Khichdi"),r()()(),P(7,"router-outlet"),r(),s(8,"nav")(9,"a",2),n(10,"main"),r(),n(11," \xA0 "),I(12,q,6,2)(13,Q,8,3),r()),o&2&&(p(3),c("routerLink","/main/0"),p(2),c("routerLink","/main/0"),p(4),c("routerLink","/main/0"),p(3),x(i._authservice.userdata()?-1:12),p(),x(i._authservice.userdata()?13:-1))},dependencies:[N,U],styles:[".container[_ngcontent-%COMP%]{width:98%;margin:auto;padding:0}nav[_ngcontent-%COMP%]{width:100%;padding:4px;position:fixed;bottom:0;display:flex;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 4px 10px #0000004d;border-top:1px solid rgba(255,255,255,.2);background-color:#0000004d}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{filter:blur(0px);color:#fff;text-decoration:none;padding:8px}header[_ngcontent-%COMP%]{overflow:hidden;height:72px;display:flex}#sliding-text[_ngcontent-%COMP%]{position:relative}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(90px)}50%{transform:translateY(0)}to{transform:translateY(-64px)}}#sliding-text[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp 4s ease-in-out forwards}@media (min-width:630px){.container[_ngcontent-%COMP%]{width:600px}}"]})};R(C,V).catch(e=>console.error(e));
