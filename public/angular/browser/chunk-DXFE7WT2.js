import{a as E}from"./chunk-XTTMFG3O.js";import{a as U,b as H}from"./chunk-DZVGEZLS.js";import{B as s,C as a,Ca as D,Ha as j,I as p,Ia as A,N as r,O as o,P as _,Q as y,R as P,W as S,X as c,Y as d,ca as u,da as I,ha as O,ia as M,o as m,s as v,t as h,ta as w,x as b,z as C}from"./chunk-2XOZC63U.js";var f=class l{constructor(t){this._userService=t}username=b.required();details;baseUrl=j.baseUrl;ngOnInit(){this._userService.getDetails(this.username()).subscribe(t=>{this.details=t})}changePicture(t){let i=t.target,e={bio:this.details.bio,displayname:this.details.displayname,profilepicture:i.files&&i.files[0]};this._userService.setDetails(e).subscribe(n=>{this.details=n,window.location.reload()})}static \u0275fac=function(i){return new(i||l)(a(E))};static \u0275cmp=m({type:l,selectors:[["app-profile-header"]],inputs:{username:[1,"username"]},standalone:!0,features:[u],decls:11,vars:4,consts:[["pp",""],[1,"container"],["alt","profile picture","type","image/jpeg",3,"click","src"],[1,"subcontainer"],["hidden","true","type","file","accept","image/jpeg,image/png,image/jpg,image/gif",3,"change"]],template:function(i,e){if(i&1){let n=y();r(0,"div",1)(1,"img",2),P("click",function(){v(n);let g=S(10);return h(g.click())}),o(),r(2,"div",3)(3,"h2"),c(4),o(),r(5,"h3"),c(6),o(),r(7,"h5"),c(8),o()()(),r(9,"input",4,0),P("change",function(g){return v(n),h(e.changePicture(g))}),o()}i&2&&(s(),p("src",e.details!=null&&e.details.profilepicture?e.baseUrl+"/"+(e.details==null?null:e.details.profilepicture):"default.png",C),s(3),d(e.details==null?null:e.details.displayname),s(2),d("@"+(e.details==null?null:e.details.username)),s(2),d(e.details==null?null:e.details.bio))},styles:["img[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50%;object-fit:cover}.container[_ngcontent-%COMP%]{display:flex}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{margin:0}.subcontainer[_ngcontent-%COMP%]{padding:0 16px}"]})};var L=()=>[],F=class l{constructor(t,i,e){this._postservice=t;this._authservice=i;this.route=e}postList$;username;ngOnInit(){this.route.paramMap.subscribe({next:t=>{this.username=t.get("username"),this.postList$=this._postservice.getAllUserPosts(t.get("username"),this._authservice.userdata()?.id)},error:t=>{}})}static \u0275fac=function(i){return new(i||l)(a(U),a(A),a(D))};static \u0275cmp=m({type:l,selectors:[["app-profile"]],standalone:!0,features:[u],decls:4,vars:5,consts:[[3,"username"],[1,"container"],[3,"list"]],template:function(i,e){if(i&1&&(_(0,"app-profile-header",0),r(1,"div",1),_(2,"app-postlist",2),O(3,"async"),o()),i&2){let n;p("username",e.username),s(2),p("list",(n=M(3,2,e.postList$))!==null&&n!==void 0?n:I(4,L))}},dependencies:[w,H,f]})};export{F as ProfileComponent};
