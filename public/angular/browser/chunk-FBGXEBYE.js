import{a as F}from"./chunk-G5KA7DMQ.js";import{a as b,b as o,c as w,d as N,e as k,f as i,h as S,i as R,k as _}from"./chunk-67WAUC34.js";import{B as n,C as a,Ea as h,I as s,Ia as C,Ja as y,N as m,O as c,P as d,R as f,X as l,Z as g,ca as v,o as u}from"./chunk-PP3VRMAE.js";var D=class p{constructor(e,t){this._authservice=e;this.route=t}message;registerform=new k({username:new i("",{nonNullable:!0,validators:[o.required]}),displayname:new i("",{nonNullable:!0,validators:[o.required]}),password:new i("",{nonNullable:!0,validators:[o.required]})});production=C.production;register(){this._authservice.register(this.registerform.value).subscribe({next:e=>{this.message=e.message,this._authservice.userdata.set(F(e.token)),localStorage.setItem("token",e.token),this.production?document.cookie=`jwt=${e.token}; path=/;Secure;`:document.cookie=`jwt=${e.token}; path=/;`,this.route.navigateByUrl("/main")},error:e=>{this.message=e.error.message}})}static \u0275fac=function(t){return new(t||p)(a(y),a(h))};static \u0275cmp=u({type:p,selectors:[["app-register"]],standalone:!0,features:[v],decls:7,vars:3,consts:[[1,"login",3,"formGroup"],["type","text","placeholder","@username","formControlName","username"],["type","text","placeholder","display name","formControlName","displayname"],["type","password","placeholder","password","formControlName","password"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(t,r){t&1&&(m(0,"div",0),d(1,"input",1)(2,"input",2)(3,"input",3),m(4,"button",4),f("click",function(){return r.register()}),l(5,"Register"),c()(),l(6)),t&2&&(s("formGroup",r.registerform),n(4),s("disabled",r.registerform.invalid),n(2),g(" ",r.message,""))},dependencies:[_,b,w,N,S,R]})};export{D as RegisterComponent};
