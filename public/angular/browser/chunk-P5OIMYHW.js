import{a as j}from"./chunk-QHNRDZGV.js";import{a as D,b as H}from"./chunk-MHBETSCG.js";import{B as s,D as a,E as m,Ia as E,K as p,Oa as U,P as r,Pa as d,Q as o,R as g,S as C,T as _,V as y,W as S,X as I,Z as c,_ as u,ea as O,ia as w,ja as M,p as v,q as h,u as P,ua as A,z as b}from"./chunk-G6XVCMRK.js";var Q=["pp"],f=class l{constructor(t,i){this._userService=t;this._authService=i}username=P.required();details;baseUrl=U.baseUrl+"/static";ngOnInit(){this._userService.getDetails(this.username()).subscribe(t=>{this.details=t})}changePicture(t){let i=t.target,e={bio:this.details.bio,displayname:this.details.displayname,profilepicture:i.files&&i.files[0]};this._userService.setDetails(e).subscribe(n=>{this.details=n,window.location.reload()})}pp;isUser(){this._authService.userdata()?.id==this.details.id&&this.pp.nativeElement.click()}static \u0275fac=function(i){return new(i||l)(a(j),a(d))};static \u0275cmp=m({type:l,selectors:[["app-profile-header"]],viewQuery:function(i,e){if(i&1&&y(Q,5),i&2){let n;S(n=I())&&(e.pp=n.first)}},inputs:{username:[1,"username"]},decls:11,vars:4,consts:[["pp",""],[1,"container"],["alt","profile picture","type","image/jpeg",3,"click","src"],[1,"subcontainer"],["hidden","true","type","file","accept","image/jpeg,image/png,image/jpg,image/gif",3,"change"]],template:function(i,e){if(i&1){let n=C();r(0,"div",1)(1,"img",2),_("click",function(){return v(n),h(e.isUser())}),o(),r(2,"div",3)(3,"h2"),c(4),o(),r(5,"h3"),c(6),o(),r(7,"h5"),c(8),o()()(),r(9,"input",4,0),_("change",function(T){return v(n),h(e.changePicture(T))}),o()}i&2&&(s(),p("src",e.details!=null&&e.details.profilepicture?e.baseUrl+"/"+(e.details==null?null:e.details.profilepicture):"default.png",b),s(3),u(e.details==null?null:e.details.displayname),s(2),u("@"+(e.details==null?null:e.details.username)),s(2),u(e.details==null?null:e.details.bio))},styles:["img[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50%;object-fit:cover}.container[_ngcontent-%COMP%]{display:flex}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{margin:0}.subcontainer[_ngcontent-%COMP%]{padding:0 16px}"]})};var F=()=>[],R=class l{constructor(t,i,e){this._postservice=t;this._authservice=i;this.route=e}postList$;username;ngOnInit(){this.route.paramMap.subscribe({next:t=>{this.username=t.get("username"),this.postList$=this._postservice.getAllUserPosts(t.get("username"),this._authservice.userdata()?.id)},error:t=>{}})}static \u0275fac=function(i){return new(i||l)(a(D),a(d),a(E))};static \u0275cmp=m({type:l,selectors:[["app-profile"]],decls:4,vars:5,consts:[[3,"username"],[1,"container"],[3,"list"]],template:function(i,e){if(i&1&&(g(0,"app-profile-header",0),r(1,"div",1),g(2,"app-postlist",2),w(3,"async"),o()),i&2){let n;p("username",e.username),s(2),p("list",(n=M(3,2,e.postList$))!==null&&n!==void 0?n:O(4,F))}},dependencies:[A,H,f],encapsulation:2})};export{R as ProfileComponent};
