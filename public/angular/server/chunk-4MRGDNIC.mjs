import './polyfills.server.mjs';
import{a as C}from"./chunk-QZLY374Y.mjs";import{a as b,b as m,c as k,d as y,e as _,f as l,h as F,i as N,k as D}from"./chunk-IMJPQH4Q.mjs";import{a as w,b as S}from"./chunk-BEMH4ZAT.mjs";import{$ as d,M as i,N as r,U as n,Z as a,_ as c,ba as f,ha as s,ja as g,mb as h,n as u,oa as v}from"./chunk-5XPW4WTW.mjs";import"./chunk-5XUXGTUW.mjs";var G=class p{constructor(e,o){this._authservice=e;this.route=o}message;loginform=new _({username:new l("",[m.required]),password:new l("",[m.required])});production=w.production;login(){this._authservice.login(this.loginform.value).subscribe({next:e=>{this.message="",this._authservice.userdata.set(C(e.token)),localStorage.setItem("token",e.token),document.cookie=`jwt=${e.token}; path=/;`,this.route.navigateByUrl("/main")},error:e=>{this.message=e.error.message}})}static \u0275fac=function(o){return new(o||p)(r(S),r(h))};static \u0275cmp=u({type:p,selectors:[["app-login"]],standalone:!0,features:[v],decls:6,vars:3,consts:[[1,"login",3,"formGroup"],["type","text","placeholder","@username","formControlName","username",1,"input-with-at"],["type","password","placeholder","password","formControlName","password"],[3,"click","disabled"]],template:function(o,t){o&1&&(a(0,"div",0),d(1,"input",1)(2,"input",2),a(3,"button",3),f("click",function(){return t.login()}),s(4,"Login"),c()(),s(5)),o&2&&(n("formGroup",t.loginform),i(3),n("disabled",t.loginform.invalid),i(2),g(" ",t.message,""))},dependencies:[D,b,k,y,F,N]})};export{G as LoginComponent};
