import './polyfills.server.mjs';
import{a as C}from"./chunk-QZLY374Y.mjs";import{a as w,b as o,c as N,d as k,e as S,f as i,h as R,i as _,k as F}from"./chunk-TPPXJY7G.mjs";import{a as y,b}from"./chunk-PRQSIW4J.mjs";import{$ as d,M as n,N as a,U as s,Z as m,_ as c,ba as f,ha as l,ja as g,mb as h,n as u,oa as v}from"./chunk-ND7GK4P5.mjs";import"./chunk-5XUXGTUW.mjs";var D=class p{constructor(e,t){this._authservice=e;this.route=t}message;registerform=new S({username:new i("",{nonNullable:!0,validators:[o.required]}),displayname:new i("",{nonNullable:!0,validators:[o.required]}),password:new i("",{nonNullable:!0,validators:[o.required]})});production=y.production;register(){this._authservice.register(this.registerform.value).subscribe({next:e=>{this.message=e.message,this._authservice.userdata.set(C(e.token)),localStorage.setItem("token",e.token),this.production?document.cookie=`jwt=${e.token}; path=/;Secure;`:document.cookie=`jwt=${e.token}; path=/;`,this.route.navigateByUrl("/main")},error:e=>{this.message=e.error.message}})}static \u0275fac=function(t){return new(t||p)(a(b),a(h))};static \u0275cmp=u({type:p,selectors:[["app-register"]],standalone:!0,features:[v],decls:7,vars:3,consts:[[1,"login",3,"formGroup"],["type","text","placeholder","@username","formControlName","username"],["type","text","placeholder","display name","formControlName","displayname"],["type","password","placeholder","password","formControlName","password"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(t,r){t&1&&(m(0,"div",0),d(1,"input",1)(2,"input",2)(3,"input",3),m(4,"button",4),f("click",function(){return r.register()}),l(5,"Register"),c()(),l(6)),t&2&&(s("formGroup",r.registerform),n(4),s("disabled",r.registerform.invalid),n(2),g(" ",r.message,""))},dependencies:[F,w,N,k,R,_]})};export{D as RegisterComponent};
